import React, { useState } from 'react'; // Importamos React y useState
import SimpleValidator from 'simple-react-validator'; // Importamos el validador

const ProductForm = ({ addProduct }) => {
    const [productName, setProductName] = useState(''); // Estado para el nombre del producto
    const [productPrice, setProductPrice] = useState(''); // Estado para el precio del producto
    const [validator] = useState(new SimpleValidator()); // Inicializamos el validador

    const handleSubmit = (e) => {
        e.preventDefault(); // Prevenimos el comportamiento por defecto del formulario
        
        if (validator.allValid()) { // Verificamos si todos los campos son válidos
            addProduct({ name: productName, price: productPrice }); // Llamamos a la función pasada como prop para agregar el producto
            setProductName(''); // Limpiamos el campo del nombre
            setProductPrice(''); // Limpiamos el campo del precio
            validator.hideMessages(); // Ocultamos los mensajes de error
        } else {
            validator.showMessages(); // Mostramos los mensajes de error si hay campos inválidos
        }
    };

    return (
        <form onSubmit={handleSubmit}>
            <input 
                type="text" 
                value={productName} 
                onChange={(e) => setProductName(e.target.value)} 
                placeholder="Nombre del producto" 
            />
            <input 
                type="number" 
                value={productPrice} 
                onChange={(e) => setProductPrice(e.target.value)} 
                placeholder="Precio del producto" 
            />
            <button type="submit">Agregar Producto</button>
            {/* Mostramos mensajes de error */}
            {validator.message('productName', productName, 'required')}
            {validator.message('productPrice', productPrice, 'required|numeric')}
        </form>
    );
};

export default ProductForm; // Exportamos el componente para usarlo en otros archivos